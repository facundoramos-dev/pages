const loveQuotes = [
  {
    text: "El amarillo de estas flores no es más brillante que la luz que dejas en mi alma.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "El 21 de septiembre trae flores… yo solo quiero que traiga más momentos contigo.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Primavera es la excusa del universo para recordarme lo bonito que es conocerte.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El viento es más suave, el sol más tibio, y todo parece florecer… como lo hace mi sentir por ti.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Las flores pintan de amarillo la estación, pero tú pintas de luz cada uno de mis días.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "El sol de septiembre brilla distinto desde que te conocí.",
    fontSizeMobile: "8.5vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Cada pétalo que abre la primavera me recuerda que contigo todo puede florecer.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La estación cambia, pero lo que de verdad renace, es mi ilusión de tenerte cerca.",
    fontSizeMobile: "8.1vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La primavera se siente más viva porque ahora existes tú en ella.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Las flores anuncian la llegada del sol, y mi corazón anuncia la llegada de ti.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "El amarillo de esta primavera es solo un reflejo de la alegría que trajiste a mi vida.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Si la primavera es un renacer, tú eres el motivo de mi despertar.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El perfume de las flores me recuerda que hay cosas que se sienten antes de entenderse, como lo que siento por ti.",
    fontSizeMobile: "6.7vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La primavera florece afuera, pero tú floreces dentro de mí.",
    fontSizeMobile: "8.5vmin",
    fontSizeDesktop: "6.2vmin",
  },
];

const friendshipQuotes = [
  {
    text: "La primavera florece y contigo siempre florece la alegría.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para la amiga que llena mis días de color.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El 21 de septiembre celebra la vida, y yo celebro tenerte como amiga.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Las flores son el abrazo de la primavera, como tu amistad es el mío.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La estación más bonita merece compartirse con personas bonitas como tú.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Que estas flores amarillas te recuerden lo valiosa que eres para mí.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La amistad también florece, y contigo lo hace cada día.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El sol brilla más fuerte, las flores más alegres… igual que mi vida cuando estás tú.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La primavera es luz, y tu amistad es una de sus formas más hermosas.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Si las flores representan alegría, entonces tú eres un jardín completo en mi vida.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La primavera trae flores amarillas, y tú traes la alegría de la amistad.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Cada 21 de septiembre florecen las flores, y también florece el cariño que tengo por ti.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La estación del renacer se vuelve más brillante con una amiga como tú.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La amistad verdadera es como la primavera: siempre vuelve a florecer.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Flores amarillas para recordarte que tu amistad es un regalo de luz.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "En este inicio de primavera, celebro lo bonito de la estación y lo bonito de tenerte como amiga.",
    fontSizeMobile: "7vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Así como las flores anuncian la primavera, tu amistad anuncia alegría en mi vida.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Las flores amarillas son símbolo de amistad, y la tuya es la más radiante de todas.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "El 21 de septiembre marca un comienzo, pero tu amistad hace que cada día sea un nuevo florecer.",
    fontSizeMobile: "7vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Primavera es amistad, y la mía florece siempre que pienso en ti.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para la amiga que convierte cada estación en algo especial.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El sol calienta, la primavera florece, y tu amistad me ilumina.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "No hay mejor regalo que celebrar la primavera contigo en mi vida.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La amistad sincera es como la primavera: siempre trae colores y esperanza.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Entre tantas flores, tú siempre serás la más especial.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El 21 de septiembre es alegría, pero tu amistad lo hace inolvidable.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Cada pétalo amarillo es un gracias por tu amistad.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera se viste de flores, y mi corazón se viste de gratitud por ti.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Las estaciones cambian, pero mi cariño por ti siempre florece.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Las flores amarillas celebran la amistad, igual que yo celebro tenerte como amiga.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Con la primavera llegan nuevas flores, con tu amistad llegan nuevas sonrisas.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Eres la flor que nunca falta en mi jardín de alegrías.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Tu amistad es como la primavera: siempre renueva mis días.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para la amiga que es mi eterno comienzo.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera florece afuera, pero la verdadera alegría florece contigo.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Flores amarillas para la amiga que ilumina mi vida con su risa.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera florece, pero nada como tu amistad florece en mi corazón.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Cada pétalo amarillo lleva un gracias por tu compañía.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Eres la flor que nunca falta en mi jardín de alegrías.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El 21 de septiembre celebra la primavera, y yo celebro tenerte a ti.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La amistad es el sol que hace que todo florezca más bonito.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Entre todas las flores, tu amistad es la más radiante.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El amarillo de estas flores es reflejo de la luz que pones en mis días.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera trae flores, pero tú traes sonrisas.",
    fontSizeMobile: "8.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La amistad es el perfume más dulce que deja esta estación.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para recordarte lo valiosa que eres.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Con tu amistad, cada estación parece primavera.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El 21 de septiembre florecen las flores, y conmigo florece la gratitud por ti.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Tu amistad es ese color que nunca se apaga en mi vida.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Las flores pintan el paisaje, tú pintas mis días de alegría.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera brilla más desde que tengo tu amistad.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para la amiga que llena de vida cada instante.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Las estaciones cambian, pero contigo siempre florezco.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Cada flor amarilla es un símbolo de lo importante que eres para mí.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera florece afuera, y nuestra amistad florece dentro de mí.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Nada es más bonito que compartir flores y sonrisas contigo.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La amistad verdadera siempre florece, como estas flores amarillas.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El 21 de septiembre me recuerda que lo bonito se comparte con amigas como tú.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Flores para la amiga que convierte cada día en un motivo para sonreír.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera es especial, pero tu amistad la hace inolvidable.",
    fontSizeMobile: "7.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "Así como las flores vuelven a nacer, mi cariño por ti renace siempre.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para la amiga que es un sol en mi vida.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La amistad también florece, y contigo lo hace cada día.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El amarillo simboliza alegría, igual que tu amistad en mi vida.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Con flores amarillas celebro tu amistad, que es un regalo constante.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera llega con su magia, y tú eres parte de la mía.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Eres la primavera en mis días grises.",
    fontSizeMobile: "8.5vmin",
    fontSizeDesktop: "5.5vmin",
  },
  {
    text: "La amistad es ese jardín que florece incluso en invierno, gracias a ti.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas para agradecerte cada momento compartido.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "El 21 de septiembre celebra la vida, y yo celebro tenerte cerca.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera florece en el mundo, y tu amistad florece en mi corazón.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Tu amistad es como el sol de primavera: siempre cálida y brillante.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Flores amarillas porque la amistad también es un renacer.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "Las flores pasan, pero nuestra amistad siempre florece.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
  {
    text: "La primavera es un inicio, como lo es cada día contigo como amiga.",
    fontSizeMobile: "8vmin",
    fontSizeDesktop: "6.2vmin",
  },
];

// No arrancamos nada aún. Esperamos al clic del botón central.
window.addEventListener("DOMContentLoaded", () => {
  const overlay = document.getElementById("launch-overlay");
  const startBtn = document.getElementById("start-btn");

  startBtn.addEventListener("click", async () => {
    // 1) Música (intenta respetar preferencia previa; si nunca usó, asumimos ON)
    localStorage.setItem("music-playing", "true");
    if (typeof window.playBgMusic === "function") {
      await window.playBgMusic(); // gesto del usuario presente -> debería funcionar en móvil
    }

    // 2) Quitar overlay
    overlay.classList.add("is-hidden");

    // 3) Quitar "not-loaded" para permitir animaciones
    document.body.classList.remove("not-loaded");

    // 4) Iniciar estrellas fugaces
    function createShootingStar() {
      const star = document.createElement("div");
      star.className = "shooting-star";
      star.style.top = Math.random() * 60 + "%";
      star.style.animationDelay = "0s";
      star.style.animationDuration = Math.random() * 1.5 + 2 + "s";
      document.querySelector(".shooting-stars").appendChild(star);
      setTimeout(() => star.remove(), 4000);
    }
    setInterval(() => {
      if (Math.random() > 0.3) createShootingStar();
    }, Math.random() * 5000 + 3000);
  });
});

// Set phases
const urlParams = new URLSearchParams(window.location.search);
const isFriendship = urlParams.get("friendship") === "true";
const selectedQuotes = isFriendship ? friendshipQuotes : loveQuotes;

console.log(isFriendship, "Selected quotes:", selectedQuotes);

let i = Math.floor(Math.random() * selectedQuotes.length);
let isAnimating = true;
const specialTextElement = document.getElementById("special-text");
showNextPhrase();

function applyFontSizeForIndex(index) {
  const isLandscape = window.matchMedia("(orientation: landscape)").matches;
  specialTextElement.style.fontSize = isLandscape
    ? selectedQuotes[index].fontSizeDesktop
    : selectedQuotes[index].fontSizeMobile;
}

specialTextElement.addEventListener("animationend", (e) => {
  if (e.animationName === "fadeIn" && isAnimating) {
    isAnimating = false;
  }
});

function cyclePhrase() {
  if (isAnimating) return;
  isAnimating = true;

  specialTextElement.style.animation = "fadeOut 500ms ease forwards";
}

function showNextPhrase() {
  i = (i + 1) % selectedQuotes.length;
  applyFontSizeForIndex(i);
  specialTextElement.textContent = selectedQuotes[i].text;
}

specialTextElement.addEventListener("animationend", (e) => {
  if (e.animationName === "fadeOut") {
    showNextPhrase();

    specialTextElement.style.animation = "fadeIn 500ms ease forwards";
  } else if (e.animationName === "fadeIn") {
    isAnimating = false;
  }
});

document.body.addEventListener("click", cyclePhrase);

window.addEventListener("orientationchange", () => {
  if (i >= 0) applyFontSizeForIndex(i);
});
window.addEventListener("resize", () => {
  if (i >= 0) applyFontSizeForIndex(i);
});
